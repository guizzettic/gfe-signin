import{j as t,r as d}from"./index-BCdGmu5g.js";const f=({id:e,label:a,name:s,type:r,value:h,onChange:m,placeholder:o})=>t.jsxs("div",{className:"space-y-1.5",children:[t.jsx("label",{htmlFor:e,className:"text-sm font-medium text-neutral-700",children:a}),t.jsx("input",{id:e,value:h,name:s,type:r,onChange:m,className:"w-full rounded border border-neutral-200 bg-neutral-50 px-3.5 py-2.5 text-sm text-neutral-700 placeholder-neutral-500",placeholder:o,required:!0})]}),S="data:image/svg+xml,%3csvg%20width='18'%20height='18'%20viewBox='0%200%2018%2018'%20fill='none'%20xmlns='http://www.w3.org/2000/svg'%3e%3cpath%20d='M8.99996%2017.3333C4.39758%2017.3333%200.666626%2013.6023%200.666626%208.99996C0.666626%204.39758%204.39758%200.666626%208.99996%200.666626C13.6023%200.666626%2017.3333%204.39758%2017.3333%208.99996C17.3333%2013.6023%2013.6023%2017.3333%208.99996%2017.3333ZM8.16879%2012.3333L14.0614%206.44073L12.8829%205.26223L8.16879%209.97629L5.8118%207.61921L4.63328%208.79779L8.16879%2012.3333Z'%20fill='%23A3A3A3'/%3e%3c/svg%3e",M="data:image/svg+xml,%3csvg%20width='18'%20height='18'%20viewBox='0%200%2018%2018'%20fill='none'%20xmlns='http://www.w3.org/2000/svg'%3e%3cpath%20d='M9.00008%2017.3333C4.39771%2017.3333%200.666748%2013.6023%200.666748%208.99996C0.666748%204.39758%204.39771%200.666626%209.00008%200.666626C13.6024%200.666626%2017.3334%204.39758%2017.3334%208.99996C17.3334%2013.6023%2013.6024%2017.3333%209.00008%2017.3333ZM8.16891%2012.3333L14.0615%206.44073L12.883%205.26223L8.16891%209.97629L5.81192%207.61921L4.63341%208.79779L8.16891%2012.3333Z'%20fill='%2315803D'/%3e%3c/svg%3e",g=e=>e?void 0:"This field is required",v=e=>a=>a&&a.length<e?`Must be at least ${e} characters`:void 0,C=e=>a=>a&&a.length>e?`Must be no more than ${e} characters`:void 0,y=e=>e&&!/\S+@\S+\.\S+/.test(e)?"Invalid email address":void 0,b=e=>e&&!/[A-Z]/.test(e)?"Must contain at least one uppercase letter":void 0,j=e=>e&&!/[a-z]/.test(e)?"Must contain at least one uppercase letter":void 0,L=e=>e&&!/\d/.test(e)?"Must contain at least one number":void 0,N=e=>e&&!/[!@#$%^&*]/.test(e)?"Must contain at least one special character (!@#$%^&*)":void 0,w=(e,a)=>{for(const s of a){const r=s(e);if(r)return r}},k=({password:e})=>{const a=[{check:s=>v(8)(s)===void 0&&C(64)(s)===void 0,text:"8 - 64 characters"},{check:s=>b(s)===void 0,text:"One uppercase letter"},{check:s=>j(s)===void 0,text:"One lowercase letter"},{check:s=>L(s)===void 0,text:"One number"},{check:s=>N(s)===void 0,text:"One special character (e.g., ! @ # $ % ^ & *)"}];return t.jsx("ul",{className:"mt-4 space-y-2 text-xs text-gray-500",children:a.map((s,r)=>t.jsxs("li",{className:"flex items-center space-x-2",children:[t.jsx("img",{src:e&&s.check(e)?M:S,alt:s.check(e)?"Requirement met":"Requirement not met",className:"h-4 w-4"}),t.jsx("span",{children:s.text})]},r))})},A=({type:e,onClick:a,children:s})=>t.jsx("button",{type:e,onClick:a,className:"w-full rounded bg-indigo-700 px-3.5 py-2.5 text-sm font-medium text-white",children:s}),Z="data:image/svg+xml,%3csvg%20width='16'%20height='12'%20viewBox='0%200%2016%2012'%20fill='none'%20xmlns='http://www.w3.org/2000/svg'%3e%3cpath%20d='M8.00028%200C11.595%200%2014.5857%202.58651%2015.2127%206C14.5857%209.41347%2011.595%2012%208.00028%2012C4.4055%2012%201.41485%209.41347%200.787842%206C1.41485%202.58651%204.4055%200%208.00028%200ZM8.00028%2010.6667C10.824%2010.6667%2013.2403%208.70133%2013.8519%206C13.2403%203.29869%2010.824%201.33333%208.00028%201.33333C5.17648%201.33333%202.76023%203.29869%202.1486%206C2.76023%208.70133%205.17648%2010.6667%208.00028%2010.6667ZM8.00028%209C6.3434%209%205.00026%207.65687%205.00026%206C5.00026%204.34315%206.3434%203%208.00028%203C9.65708%203%2011.0003%204.34315%2011.0003%206C11.0003%207.65687%209.65708%209%208.00028%209ZM8.00028%207.66667C8.92075%207.66667%209.66695%206.92047%209.66695%206C9.66695%205.07953%208.92075%204.33333%208.00028%204.33333C7.07982%204.33333%206.33359%205.07953%206.33359%206C6.33359%206.92047%207.07982%207.66667%208.00028%207.66667Z'%20fill='%23171717'/%3e%3c/svg%3e",P="data:image/svg+xml,%3csvg%20width='16'%20height='9'%20viewBox='0%200%2016%209'%20fill='none'%20xmlns='http://www.w3.org/2000/svg'%3e%3cpath%20d='M6.22854%208.52127L4.94064%208.17614L5.46562%206.21694C4.67288%205.92494%203.94449%205.49987%203.30752%204.96894L1.87197%206.40447L0.929162%205.46167L2.36472%204.02614C1.57062%203.07354%201.01351%201.91645%200.783936%200.645459L2.09599%200.406906C2.60201%203.20841%205.05296%205.33341%208.00022%205.33341C10.9475%205.33341%2013.3985%203.20841%2013.9045%200.406906L15.2165%200.645459C14.9869%201.91645%2014.4298%203.07354%2013.6358%204.02614L15.0713%205.46167L14.1285%206.40447L12.693%204.96894C12.056%205.49987%2011.3275%205.92494%2010.5348%206.21694L11.0598%208.17614L9.77195%208.52127L9.24675%206.56121C8.84162%206.63061%208.42515%206.66674%208.00022%206.66674C7.57535%206.66674%207.15882%206.63061%206.75375%206.56121L6.22854%208.52127Z'%20fill='%23A3A3A3'/%3e%3c/svg%3e",E=e=>{const[a,s]=d.useState(!1),r=()=>s(!a);return t.jsxs("div",{className:"relative",children:[t.jsx(f,{...e,type:a?"text":"password"}),t.jsx("button",{type:"button",onClick:r,className:"absolute right-3 top-11","aria-label":a?"Hide password":"Show password",title:a?"Hide password":"Show password",children:a?t.jsx("img",{src:Z,className:"h-3 w-[14.42483901977539px] text-neutral-900",alt:"Hide password"}):t.jsx("img",{src:P,className:"h-3 w-[14.42483901977539px] text-neutral-900",alt:"Display password"})})]})},F=(e,a=!1)=>{const[s,r]=d.useState(e),[h,m]=d.useState({}),o=d.useCallback((l,c)=>{if(!s[l]||!Array.isArray(s[l].rules))return console.error(`No rules found for field: ${l}`),!0;const i=w(c,s[l].rules);return m(n=>({...n,[l]:i})),!i},[s]),u=d.useCallback(l=>{const{name:c,value:i}=l.target,n=c;r(p=>({...p,[n]:{...p[n],value:i}})),a&&o(n,i)},[o,a]),x=d.useCallback(()=>{const l={};let c=!0;return Object.keys(s).forEach(i=>{const n=w(s[i].value,s[i].rules);l[i]=n,n&&(c=!1)}),m(l),c},[s]);return{fields:s,errors:h,handleChange:u,validateForm:x,validateFields:o}},$=({type:e,onSubmit:a,setFormError:s})=>{const[r,h]=d.useState(!1),[m,o]=d.useState(!1),{fields:u,errors:x,handleChange:l,validateForm:c}=F({email:{value:"",rules:[g,y]},password:{value:"",rules:e==="signup"?[g,v(8),C(64),b,j,L,N]:[g]}},e==="signup"),i=async n=>{if(n.preventDefault(),s(null),c()){if(e==="signup"&&!r){s("You must agree to the Terms of Service to create an account.");return}o(!0);try{await a(u.email.value,u.password.value)}catch(p){s(p.message)}finally{o(!1)}}else s("Please correct the errors in the form.")};return t.jsxs("form",{onSubmit:i,className:"w-full space-y-6 md:w-[456px] xl:w-96",children:[t.jsx(f,{id:"email-field",type:"email",name:"email",label:"Email",value:u.email.value,onChange:l,placeholder:"john@example.com",error:x.email}),t.jsxs("div",{children:[t.jsx(E,{id:"password-field",name:"password",label:"Password",value:u.password.value,onChange:l,placeholder:"**********",error:x.password}),e==="signup"&&t.jsx(k,{password:u.password.value})]}),e==="signup"&&t.jsxs("div",{className:"flex items-center",children:[t.jsx("input",{type:"checkbox",id:"terms",checked:r,onChange:n=>h(n.target.checked),className:"mr-2"}),t.jsxs("label",{htmlFor:"terms",className:"text-sm",children:["I agree with CodePulse"," ",t.jsx("span",{className:"text-indigo-700",children:"Terms of Service"})]})]}),t.jsx(A,{type:"submit",children:m?"Processing...":e==="signin"?"Sign In":"Create account"})]})},q=({errorType:e})=>t.jsxs("div",{className:"absolute left-1/2 top-10 z-50 flex w-[342px] max-w-full -translate-x-1/2 transform items-center gap-3 rounded-full bg-red-50 py-1 pl-1 pr-2.5 sm:top-7 sm:w-auto",children:[t.jsx("div",{className:"flex items-center rounded-full bg-white px-2.5 py-0.5",children:t.jsx("span",{className:"text-center text-sm font-medium text-red-800 shadow",children:"Error"})}),t.jsx("div",{className:"flex items-center gap-1",children:t.jsx("span",{className:"text-sm font-medium text-red-600",children:e})})]});export{$ as A,q as E};
